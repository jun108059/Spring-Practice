# ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ë¹ˆ

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ : ApplicationContext (=~ BeanFactory)

## 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ë° ë¹ˆ ë“±ë¡ ë°©ì‹

```java
AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
```

AnnotationConfigApplicationContext ëŠ” ApplicationContextë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤

![image](https://user-images.githubusercontent.com/42997924/180614883-6b7da137-30bc-46a7-ad32-cac7f072aefa.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

ë¹ˆì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í• ë•ŒëŠ” ë©”ì†Œë“œ ì´ë¦„ì„ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë“±ë¡í•œë‹¤.

![image](https://user-images.githubusercontent.com/42997924/180614888-8de585da-f25e-41f2-944d-506cf9889258.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.

![image](https://user-images.githubusercontent.com/42997924/180614894-97c78c3e-e77c-4675-8008-e9a14a5c63ec.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

**DI(Dependency Injection)**

- ë™ì ì¸ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„(ì°¸ì¡°ê°’)ì„ ì£¼ì…í•´ì¤€ë‹¤.

> ì‚¬ì‹¤ì€ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ 2ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆìŒ
> ì˜ì¡´ê´€ê³„ ìë™ì£¼ì…ì— ëŒ€í•´ ê³µë¶€í•  ë•Œ ë‹¤ì‹œ ë‹¤ë£° ì˜ˆì •!

### 2. ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ë¹ˆ ì¡°íšŒ

```java
@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);
        // Role ROLE_APPLICATION : ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
        // Role ROLE_INFRASTRUCTURE : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
        if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
            System.out.println("beanName = " + beanDefinitionName + " beanDefinition = " + beanDefinition);
        }
    }
}
```

### 3. ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ

```java
// ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ
MemberService memberService = ac.getBean("memberService", MemberService.class);

// íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ
MemberService memberService = ac.getBean(MemberService.class);

// êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ (êµ¬í˜„ì— ì˜ì¡´í•´ì„œ ì¢‹ì§€ëŠ” ì•ŠìŒ)
MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);

// ë¹ˆ ì´ë¦„ ì¡°íšŒë˜ì§€ ì•Šìœ¼ë©´ Exception ë°œìƒ
ac.getBean("xxxxx", MemberService.class);
// NoSuchBeanDefinitionException

// ë™ì¼í•œ íƒ€ì…ì˜ ì¤‘ë³µ ë¹ˆì´ ì¡°íšŒë˜ë©´ Exception ë°œìƒ
MemberService memberService = ac.getBean(MemberService.class);
// NoUniqueBeanDefinitionException
```

íŠ¹ì • íƒ€ì…ì˜ Beanì„ ëª¨ë‘ ì¡°íšŒí•˜ë ¤ë©´ `getBeansOfType()` methodë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤.

```java
@Test
@DisplayName("íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
void findAllBeanByType() {
    Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
    for (String key : beansOfType.keySet()) {
        System.out.println("key = " + key + "value = " + beansOfType.get(key));
    }
    System.out.println("beansOfType = " + beansOfType);
    Assertions.assertEquals(2, beansOfType.size());
}
```

**ìƒì†ê´€ê³„**

> **ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒëœë‹¤!**

ê·¸ë˜ì„œ, Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ëª¨ë“  ìŠ¤í”„ë§ Beanì„ ì¡°íšŒí•œë‹¤.

<aside>

ğŸ’¡ ì‹¤ì œ ê°œë°œí•  ë•Œ ApplicationContext ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì„œ getBeanì„ í•˜ëŠ” ê²½ìš°ëŠ” ì—†ë‹¤.

</aside>

## BeanFactoryì™€ ApplicationContext

![image](https://user-images.githubusercontent.com/42997924/180614897-0871a9a6-eb37-4825-9485-defd6fccd35b.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

### 1. ì°¨ì´ì 

**BeanFactory**

- Spring ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- Spring Beanì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹ (`getBean()` method ì œê³µ)

**ApplicationContext**

- BeanFactory ê¸°ëŠ¥ì„ ìƒì†
- ì´ì™¸ì— ìˆ˜ ë§ì€ ë¶€ê°€ê¸°ëŠ¥ì„ ì œê³µ

![image](https://user-images.githubusercontent.com/42997924/180614901-efe5ced8-2ded-46ed-8c6a-02b8053eed7b.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

- í™˜ê²½ë³€ìˆ˜, ë©”ì‹œì§€ì†ŒìŠ¤(êµ­ì œí™” ê¸°ëŠ¥), ì´ë²¤íŠ¸ë°œí–‰&êµ¬ë… ëª¨ë¸ì§€ì›, ë¦¬ì†ŒìŠ¤ì¡°íšŒ ë“±

> BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ì—†ê³ ,  ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContectë¥¼ ì‚¬ìš©
> **ì´ ë‘ê°œë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤.**

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì„¤ì •(ApplicationContext êµ¬í˜„)

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“œë¦´ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/42997924/180614907-ad73477e-adc0-4538-a35a-6a008b894845.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

- Java ì½”ë“œ, XML, Groovy ë“±

> ìµœê·¼ì—ëŠ” Java ê¸°ë°˜ì´ ëŒ€ë¶€ë¶„ì´ê³ , ì˜›ë‚ ì— XML ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ ë³´ê³  ì´í•´ëŠ” í•  ìˆ˜ ìˆì–´ì•¼ í•¨

## ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ (BeanDefinition)

> ìŠ¤í”„ë§ì€ BeanDefinitionë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ì„ ì§€ì›í•  ìˆ˜ ìˆë‹¤!

![image](https://user-images.githubusercontent.com/42997924/180614917-682abeb6-517d-47a3-8c5b-70b8c20c73ba.png)

(ì¶œì²˜ : [ì¸í”„ëŸ° ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/unit/55352))

- ì—­í• ê³¼ êµ¬í˜„ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ì˜ ë‚˜ëˆ´ìŒ
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefintionë§Œ ì˜ì¡´í•˜ë©´ ë¨!

ì½”ë“œ ë ˆë²¨ë¡œ ì¡°ê¸ˆ ë” ê¹Šì´ ìˆê²Œ í™•ì¸í•´ë³´ì.

![image](https://user-images.githubusercontent.com/42997924/180614925-5b91c931-8a85-4757-8b2d-1c9a8af022f7.png)

![image](https://user-images.githubusercontent.com/42997924/180614935-7fcce192-25d1-4cb3-bf0f-fe5612cbe13e.png)

### BeanDefinition ì‚´í´ë³´ê¸°

- BeanClassName : ìƒì„±í•  ë¹ˆì˜ í´ë˜ìŠ¤ ëª…(ìë°” ì„¤ì •ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)
- factoryBeanName : íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•  ê²½ìš° ì´ë¦„, ì˜ˆ) appConfig
- factoryMethodName : ë¹ˆì„ ìƒì„±í•  íŒ©í† ë¦¬ ë©”ì„œë“œ ì§€ì •, ì˜ˆ) memberService
- Scope : ì‹±ê¸€í†¤(ê¸°ë³¸ê°’)
- lazyInit : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë¹ˆì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë¹ˆì„ ì‚¬ìš©í•  ë•Œê¹Œì§€ ìµœëŒ€í•œ ìƒì„±ì„ ì§€ì—°ì²˜ë¦¬ í•˜ëŠ”ì§€ ì—¬ë¶€
- InitMethodName : ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì ìš©í•œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ì´ˆê¸°í™” ë©”ì„œë“œ ëª…
- DestoryMethodName : ë¹ˆì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ì„œ ì œê±°í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ëª…
- Constructor arguments, Properties : ì˜ì¡´ê´€ê³„ ì£¼ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. (ìë°” ì„¤ì •ì²˜ëŸ¼ íŒ©í„°ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)

> BeanDefinitionì„ ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ìŒ!
